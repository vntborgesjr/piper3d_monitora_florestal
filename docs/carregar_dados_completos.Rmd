---
title: "carregar_dados_completos()"
output: 
   html_document:
     df_print: 'paged'
---

carregar_dados_completos {}                                            Documentação R

# Carrega e transforma a planilha original de dados

## Descrição

A função `carregar_dados_completos()` carrega toda a planilha de dados originais, `"Planilha Oficial consolidada de Masto-aves 2014-21 Validada CEMAVE CPB CENAP.xlsx"` para o R no formato `tibble`, selecionando automaticamente as colunas `CDU`, `Local - Nome da Unidade de Conservação`, `Número da Estação Amostral`, `Nome da EA`, `Estação do ano`, `data da amostragem`, `Esforço de amostragem tamanho da trilha (m)`, `Espécies validadas para análise do ICMBio`, `distância (m)     do animal em relação a trilha`, `n° de animais` e `nome dos observadores`.  As variáveis são automaticamente renomeadas para uc_code = CDUC, uc_name, ea_number, ea_name, season, sampling_day, day_effort, sp, distance, group_size e number_observers. 

## Uso

`carregar_dados_completos(
  dados = NULL
  )`

## Argumentos

`dados`       Arquivo de dados original do Programa Monitora em formato `.xlsx`.

## Detalhes

A funcionalidade depende da formataçao correta dos dados. É importante manter o padrão dos nomes das colunas e das observações categóricas em versões atualizadas dos dados. Para aplicar a função é necessário utilizar a versão R 4.2.2 e estar com as versões atualizadas dos pacotes `readxl`, `dplyr`, `lubridate`, `stringr`,  `tdiyr` e `tidyselect`.

## Exemplo

```{r}
# carregar função corrigir_diretorio
source(
  paste0(
    stringr::str_remove(
      getwd(), 
      'doc'
    ),
    "R/corrigir_diretorio.R"
  )
) 

# carregar a função
source(
  corrigir_diretorio(
  corrige = 'R/carregar_dados_completos.R'
)
)

# carregar dados para o R
dados <- carregar_dados_completos(
  dados = corrigir_diretorio(
    corrige = 'data-raw/dados-brutos.xlsx'
  ) 
)

dados
```

```{r}
# gravar no disco os dados importados para o R
#readr::write_rds(dados, paste0(stringr::str_remove(getwd(), 'doc'), "data/dados_completos.rds")) 
```

